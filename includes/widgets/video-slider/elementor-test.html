<!DOCTYPE html>
<html>
<head>
    <title>Elementor Video Lightbox Test</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        /* Basic slider styles */
        .wpzjs-slick {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .wpz-slick-slide {
            position: relative;
            height: 500px;
            overflow: hidden;
        }
        
        .wpz-slick-item {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #333;
            color: white;
        }
        
        .wpz-slick-content {
            text-align: center;
            z-index: 2;
            position: relative;
            background: rgba(0,0,0,0.5);
            padding: 30px;
            border-radius: 8px;
        }
        
        .wpz-slick-title {
            font-size: 2em;
            margin-bottom: 15px;
        }
        
        .wpz-slick-subtitle {
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        
        .wpz-slick-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
        }
        
        .wpz-slick-button {
            padding: 12px 25px;
            background: #007cba;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s ease;
        }
        
        .wpz-slick-button:hover {
            background: #005a87;
            color: white;
        }
        
        .wpz-slick-lightbox-trigger {
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
        }
        
        .wpz-slick-lightbox-trigger:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
            transform: scale(1.1);
            color: white;
        }
        
        .eicon-play:before {
            content: "â–¶";
        }
        
        /* Slick arrow styles */
        .slick-prev, .slick-next {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            z-index: 10;
        }
        
        .slick-prev:hover, .slick-next:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
        }
        
        .test-info {
            background: white;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h1>Elementor Video Slider Test</h1>
        <p>This test simulates the Elementor environment to debug the video lightbox functionality.</p>
        <p><strong>Test Instructions:</strong></p>
        <ul>
            <li>Check browser console for debug messages</li>
            <li>Click the play button on slide 2 to test video lightbox</li>
            <li>Verify that the lightbox opens instead of redirecting to the video URL</li>
        </ul>
    </div>

    <!-- Simulate Elementor widget structure -->
    <div class="elementor-element elementor-widget elementor-widget-wpzoom-elementor-addons-video-slider" data-id="test123" data-element_type="widget">
        <div class="elementor-widget-container">
            <div class="wpzjs-slick wpz-slick wpz-slick--slider">
                
                <!-- Slide 1: Button -->
                <div class="wpz-slick-slide">
                    <div class="wpz-slick-item">
                        <div class="wpz-slick-content">
                            <h2 class="wpz-slick-title">Test Slide with Button</h2>
                            <p class="wpz-slick-subtitle">This slide has a regular button link.</p>
                            <div class="wpz-slick-actions">
                                <a href="#" class="wpz-slick-button">Learn More</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 2: Video Lightbox -->
                <div class="wpz-slick-slide">
                    <div class="wpz-slick-item">
                        <div class="wpz-slick-content">
                            <h2 class="wpz-slick-title">Test Video Lightbox</h2>
                            <p class="wpz-slick-subtitle">Click the play button to test the video lightbox functionality.</p>
                            <div class="wpz-slick-actions">
                                <a href="https://vimeo.com/729485552" class="wpz-slick-lightbox-trigger" title="Play Video">
                                    <i class="eicon-play" aria-hidden="true"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 3: YouTube Lightbox -->
                <div class="wpz-slick-slide">
                    <div class="wpz-slick-item">
                        <div class="wpz-slick-content">
                            <h2 class="wpz-slick-title">YouTube Video Test</h2>
                            <p class="wpz-slick-subtitle">Test YouTube video in lightbox.</p>
                            <div class="wpz-slick-actions">
                                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" class="wpz-slick-lightbox-trigger" title="Play Video">
                                    <i class="eicon-play" aria-hidden="true"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="test-info">
        <h3>Expected Behavior:</h3>
        <ul>
            <li>Slider should initialize with 3 slides</li>
            <li>Navigation arrows should work</li>
            <li>Video lightbox triggers should not redirect to video URLs</li>
            <li>Console should show lightbox initialization messages</li>
            <li>Lightbox should open when clicking play buttons</li>
        </ul>
    </div>

    <script>
        // Minimal Elementor frontend simulation
        window.elementorFrontend = {
            config: {
                breakpoints: {
                    lg: 1025,
                    md: 768
                }
            },
            isEditMode: function() {
                return false;
            }
        };

        window.elementorModules = {
            frontend: {
                handlers: {
                    Base: function() {}
                }
            }
        };

        // Add prototype methods to Base
        elementorModules.frontend.handlers.Base.prototype = {
            onInit: function() {},
            findElement: function(selector) {
                return this.$element.find(selector);
            },
            getSettings: function(key) {
                var settings = {
                    container: '.wpzjs-slick',
                    'selectors.videoBg': '.wpz-video-bg',
                    'selectors.videoWrapper': '.wpz-video-wrapper'
                };
                return settings[key];
            },
            getElementSettings: function(key) {
                var settings = {
                    loop: true,
                    autoplay: false,
                    autoplay_speed: 3000,
                    animation_speed: 300,
                    center: false,
                    vertical: false,
                    navigation: 'arrow',
                    slides_to_show: 1,
                    slides_to_show_tablet: 1,
                    slides_to_show_mobile: 1
                };
                return settings[key];
            }
        };

        // Include the actual video slider JavaScript logic here
        // (This would normally be loaded from frontend.js)
        $(document).ready(function() {
            console.log('Initializing test slider...');
            
            // Initialize the slider with basic settings
            $('.wpzjs-slick').slick({
                infinite: true,
                autoplay: false,
                autoplaySpeed: 3000,
                speed: 300,
                slidesToShow: 1,
                slidesToScroll: 1,
                arrows: true,
                dots: false,
                prevArrow: '<button type="button" class="slick-prev">Previous</button>',
                nextArrow: '<button type="button" class="slick-next">Next</button>'
            });

            // Simulate the video lightbox functionality
            function initVideoLightbox() {
                console.log('Initializing video lightbox...');
                
                // Remove any existing event handlers
                $('.elementor-widget-wpzoom-elementor-addons-video-slider').off('click.wpzLightbox', '.wpz-slick-lightbox-trigger');
                
                // Use event delegation
                $('.elementor-widget-wpzoom-elementor-addons-video-slider').on('click.wpzLightbox', '.wpz-slick-lightbox-trigger', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    var videoUrl = $(this).attr('href');
                    console.log('Video lightbox triggered for:', videoUrl);
                    alert('Video lightbox would open for: ' + videoUrl);
                    
                    // In the real implementation, this would call openVideoLightbox(videoUrl)
                });
                
                console.log('Video lightbox initialized successfully');
            }

            // Initialize after a short delay to simulate real environment
            setTimeout(function() {
                initVideoLightbox();
                console.log('Test setup complete');
            }, 500);
        });
    </script>
</body>
</html> 